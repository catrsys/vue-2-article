# Уязвимости Vue 2 и смежных пакетов

## Содержание
1. [Введение](#введение)
2. [Уязвимости фронтенда](#уязвимости_фронтенда)
   1. XSS
   2. Prototype Pollution
   3. CSTI (?)
   4. CSRF (?)
   5. ReDOS
   6. Open Redirect (?)
3. Что же такое Vue
4. Уязвимости Vue 2
   1. XSS
   2. ReDOS
5. Уязвимости смежных пакетов
   1. XSS
      1. bootstrap-vue
      2. vuetify
      3. buefy
   2. Prototype Pollution
   3. ReDOS
6. Рекомендации

## <a name="Введение">Введение</a>
В этой статье я хотела бы рассмотреть уязвимости фреймворка Vue.js второй версии [а также некоторых совместимых с ним пакетов и библиотек] и способы их исправления. По моему скромному опыту, Vue показывает себя как очень лаконичный и приятный инструмент для фронтенд-разработки. Это, в свою очередь, усиливает желание сделать результат разработки как можно более качественным и безопасным.

В настоящий момент Vue.js активно набирает популярность, немногим уступая таким известным JavaScript-фреймворкам и библиотекам, как React и AngularJS. Несмотря на то, что он начинался как индивидуальный проект, его уже используют многие крупные компании, включая Netflix, Facebook и GitLab.

Статья является обзорной и может быть интересна как фронтенд-разработчикам, так и специалистам по анализу защищенности веб-приложений.

## Уязвимости фронтенда
В OWASP Top 10 Client-Side Security Risks перечислены наиболее распространенные уязвимости на стороне клиента. Рассмотрим те из них, которые чаще встречаются во Vue и смежных пакетах:

### XSS


### Prototype Pollution


### CSTI


### CSRF


### ReDOS


### Open Redirect


## Что такое Vue.js
Vue (произносится как “вью”) – это прогрессивный Java-Script фреймворк с открытым исходным кодом для создания пользовательских интерфейсов и одностраничных веб-приложений. Разработка Vue.js ведется с 2013 года; первая и вторая версии были выпущены в 2015 и 2016 годах, третья – в 2020. На данный момент из-за того, что большинство библиотек компонентов все еще несовместимы с последней версией фреймворка, наибольшей популярностью у разработчиков пользуется Vue 2.

К основным особенностям фреймворка относятся:
* декларативный рендеринг
* реактивность

__Декларативный рендеринг__ позволяет отображать данные в DOM, используя простой синтаксис шаблонов. В отличие от императивного стиля, разработчик делегирует детали реализации фреймворку, описывая не то, что он должен сделать, а то, как должен выглядеть результат.

__Реактивность__ означает, что представление в модели MVC изменяется по мере изменения модели: разработчики привязывают представление к соответствующей модели, и Vue автоматически наблюдает за изменениями, обновляя его.

От своих аналогов – AngularJS и React – Vue отличается простотой и лаконичностью. Его называют прогрессивным и постепенно адаптируемым по сравнению с другими веб-фреймворками.
Ниже представлен базовый пример приложения на Vue 2:

Узнать больше о Vue 2 можно на [официальном сайте](https://v2.vuejs.org/) и в [репозитории](https://github.com/vuejs/vue).

## Уязвимости Vue 2
Демо XSS в Vue.js [7] показывает, что XSS может появиться на странице, где используется директива v-html. Она позволяет парсить HTML из небезопасного пользовательского ввода [8], встраивая на страницу произвольный код.

CSRF во Vue.js возможна тогда, когда при разработке не используется библиотек для формирования и проверки CSRF-токенов, позволяющих однозначно установить, был ли запрос совершен пользователем со страницы веб-ресурса или кем-то от его имени.


## Уязвимости смежных пакетов


## Рекомендации
Так как XSS обусловлено использованием директивы v-html, существует несколько подходов по ее устранению:
* выключить парсинг HTML, подставляя сообщения на страницу так, как есть: ```<p>{{ message.text }}</p>```;
* в случае, если парсинг HTML необходим – санитизировать пользовательский ввод при помощи пакета sanitize-html: ```<p v-html="sanitizeHtml(message.text)"></p>```;
* настроить Content Security Policy, которая будет обеспечивать безопасность всей платформы и послужит последней линией защиты.

CSRF устраняется добавлением csrf-токенов (модуль csurf).



1. Введение (актуальность, зачем/почему, кому полезно)
2. Основные уязвимости на фронте, что это такое
3. Что такое Vue.js
   
===== вы находитесь здесь =====

1. Какие уязвимости есть во Vue
2. Уязвимости смежных пакетов
3. Как не отстрелить себе ногу (рекомендации)

Для тех, кто уже знаком с React, пример обоих стилей может выглядеть так:
```React
this.state.data.map((item, i) => <div key={item.id}>item.text</div>)
```
```Vue
<div v-for=”(item, index) in items” :key=”item.id”>{{ item.text }}</div>
```